[
  {
    "path": "posts/code_example_1/",
    "title": "Agglomerative Hierarchical Clustering of Stream Chemistry in Santa Barbara ",
    "description": {},
    "author": [
      {
        "name": "Conner Jainese",
        "url": {}
      }
    ],
    "date": "2022-02-23",
    "categories": [],
    "contents": "\r\nOverview\r\nThis report explores a data set collected by the Santa Barbara Coastal Long Term Ecological Reserch (LTER) group between 2000 and 2019. The data set contains measurements for stream chemistry in Santa Barbara area watersheds. We will use agglomerative hierarchical clustering to compare similarities between the 13 water sampling locations listed in this data set.\r\nData Citation: Santa Barbara Coastal LTER and J. Melack. 2019. SBC LTER: Land: Stream chemistry in the Santa Barbara Coastal drainage area, ongoing since 2000 ver 16. Environmental Data Initiative. https://doi.org/10.6073/pasta/67a558a24ceed9a0a5bf5e46ab841174\r\n\r\n\r\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\r\n# load packages \r\nlibrary(tidyverse)\r\nlibrary(here)\r\nlibrary(janitor)\r\nlibrary(naniar)\r\nlibrary(ggdendro)\r\nlibrary(dendextend)\r\n\r\n\r\n\r\n\r\n\r\n# read in the data and clean variable names \r\nstream_dat <- read_csv(here(\"data\", \r\n                            \"sbc_lter_registered_stream_chemistry.csv\")) %>% \r\n  janitor::clean_names() %>% \r\n  # replace -999.0 values with NA\r\n  naniar::replace_with_na_all(condition = ~.x == -999.0) %>% \r\n  # remove timestamp column\r\n  select(-timestamp_local)\r\n\r\n\r\n\r\n\r\n\r\n# create df with means for each site in single rows\r\nstream_dat_mean <- stream_dat %>% \r\n  # group by site \r\n  group_by(site_code) %>% \r\n  # summarize mean for each variable ignoring NA values \r\n  summarise_each(funs(mean(., na.rm = TRUE)))\r\n\r\n# create scaled version of data \r\nmean_scale <- stream_dat_mean %>%\r\n  # remove non numeric variables before scaling\r\n  select(-site_code) %>% \r\n  # scale \r\n  scale()\r\n\r\n# add rownames (site_code) back to scaled data \r\nrownames(mean_scale) <- stream_dat_mean$site_code\r\n\r\n\r\n\r\n\r\n\r\n# create euclidean distance matrix\r\nstream_dist <- dist(mean_scale, method = 'euclidean')\r\n#stream_dist\r\n\r\n# complete linkage hierarchical clustering \r\nstream_hc_complete <- hclust(stream_dist, method = \"complete\")\r\n\r\n# preliminary plotting\r\n# plot(stream_hc_complete, cex = 0.6, hang = -1)\r\n\r\n\r\n\r\n\r\n\r\n# create data without na values for identifying useful number of clusters for dendrogram visualization\r\n# mean_scale_no_na <- na.omit(mean_scale)\r\n\r\n# use kmeans clustering to find clusters\r\n# fviz_nbclust(mean_scale_no_na, FUNcluster = kmeans, method = 'wss', k.max = 8)\r\n# 3 clusters seems to capture the most variance \r\n\r\n\r\n\r\n\r\n\r\n# create dendrogram with ggdendro::ggdendrogram\r\ndendro <- ggdendrogram(stream_hc_complete, rotate = TRUE) +\r\n  theme_test() +\r\n  # update x/y labs and title/subtitle\r\n  labs(y = \"Euclidian Distance\", \r\n       x = \"Site Code\", \r\n       title = \"Hierachical Clustering of Santa Barbara Streams\", \r\n       subtitle = \"Based on Water Chemistry\") + \r\n  # center title and subtitle\r\n  theme(plot.title = element_text(hjust = 0.5)) +\r\n  theme(plot.subtitle = element_text(hjust = 0.5)) +\r\n  # color ticks based on 3 groupings from earlier clulstering\r\n  theme(axis.text.y = \r\n          element_text(colour = \r\n                         c(\"red\", \"darkolivegreen\", \"darkolivegreen\", \r\n                           \"darkolivegreen\", \"darkolivegreen\", \r\n                           \"darkolivegreen\", \"darkolivegreen\", \r\n                           \"darkolivegreen\", \"darkolivegreen\", \r\n                           \"darkolivegreen\", \"deepskyblue\", \r\n                           \"deepskyblue\", \"deepskyblue\")))\r\n# print\r\ndendro\r\n\r\n\r\n\r\n\r\nFigure 1. Dendrogram illustrating Euclidean distance between 13 stream sampling locations (Site Code) in the Santa Barbara area based on mean values for 10 measured variables. Site codes are colored to represent 3 generally related groups (number of groups determined by kmeans clustering) and branch lengths of the dendrogram are drawn to represent Euclidean distance.\r\nSummary\r\nGroup 1\r\nDevereaux Creek (DV01) stands alone in it’s own cluster\r\nSamping for this stream occured at the Devereaux Slough inflow.\r\nSince the Devereaux Slough is tidal for some portions of the year, it is possible that the chemistry at this location is affected by sea water that enters the slough.\r\nGroup 2\r\nThe largest group containing 9 sampling locations.\r\nIt is worth noting that the two Mission Creek sampling locations (MC00 and MC06) are closely grouped within this larger grouping.\r\nMission creek sites are also closely grouped with San Pedro Creek (SP02) and Arroyo Burro Creek (AB00), which is possibly a reult of these creeks flowing through similarly developed portions of Santa Barbara.\r\nIt is likely that these creeks experience similar anthropogenic chemical inputs.\r\nGroup 3\r\n3 sampling sites from 3 different creeks compose this grouping\r\nInterestingly, all of these site_codes contain the suffix “02”. This suffix represents the relative distance upstream of the sampling location.\r\nIt is possible that the chemical makeup of the streams at these sampling locations is affected by their relative distance upstream.\r\nIt is also worth noting that the Tecolote Creek (TO02) and Bell Canyon Creek (BC02) sampling locations are only ~1.2 km away from each other.\r\n\r\n\r\n\r\n",
    "preview": "posts/code_example_1/code_example_1_files/figure-html5/unnamed-chunk-5-1.png",
    "last_modified": "2022-02-24T09:41:39-08:00",
    "input_file": {}
  },
  {
    "path": "posts/code_example_2/",
    "title": "PCA Analysis of Fruit and Vegetable Nutrients",
    "description": {},
    "author": [
      {
        "name": "Conner Jainese",
        "url": {}
      }
    ],
    "date": "2022-02-20",
    "categories": [],
    "contents": "\r\nOverview\r\nIn this report, we explore the nutritional values of a subset of fruits and vegetables from the U.S. Department of Agriculture’s FoodData Central. This database provides expanded food nutrient profile data for research and more informed policy making. We will analyze the nutritional data (a subset) of four fruit and vegetable types (grapes, persimmons, mushrooms, and lettuce) using Principal Components Analysis (PCA), and compare the results between these groups.\r\nData Citation: U.S. Department of Agriculture, Agricultural Research Service. FoodData Central, 2019. fdc.nal.usda.gov.\r\n\r\n\r\nknitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)\r\n\r\n# load packages\r\nlibrary(tidyverse)\r\nlibrary(here)\r\nlibrary(janitor)\r\nlibrary(data.table)\r\nlibrary(ggfortify)\r\nlibrary(patchwork)\r\n\r\n\r\n\r\n\r\n\r\n## Data wrangling\r\n# read in the data and filter for raw vegetables\r\nnut_dat <- read_csv(here(\"data\", \r\n                         \"usda_nutrients.csv\")) %>% \r\n  clean_names()\r\n\r\n# filter for raw fruits and vegetables \r\nnut_sub <- nut_dat %>% \r\n  filter(food_group %in% c(\"Vegetables and Vegetable Products\", \r\n                           \"Fruits and Fruit Juices\")) %>% \r\n  filter(descrip %like% \"raw\", ) %>% \r\n  # remove rows with NA for scientific name\r\n  filter(scientific_name != \"NA\") %>% \r\n  # remove duplicates for scientific name \r\n  filter(! duplicated(scientific_name)) %>% \r\n  # new column with first word from short_descrip\r\n  mutate(name = str_extract(short_descrip,\"(\\\\w+)\")) %>% \r\n  # filter for a few groups of fruits and vegetables \r\n  filter(name %in% c(\"GRAPES\", \"LETTUCE\", \r\n                     \"MUSHROOMS\", \"PERSIMMONS\")) %>% \r\n  # select columns we want to work with for now\r\n  select(4, 7:15, 17, 46) %>% \r\n  drop_na()\r\n\r\n# change column names for nicer looking plot outplot \r\nnut_sub <- nut_sub %>% \r\n  rename(\"Kcal\" = energy_kcal, \r\n         \"Protein\" = protein_g, \r\n         \"Fat\" = fat_g, \r\n         \"Carbs\" = carb_g, \r\n         \"Sugar\" = sugar_g, \r\n         \"Fiber\" = fiber_g, \r\n         \"Vitamin A\" = vit_a_mcg, \r\n         \"Vitamin B6\" = vit_b6_mg, \r\n         \"Vitamin C\" = vit_c_mg)\r\n\r\n\r\n\r\n\r\n\r\n## PCA start \r\n# create nut_pca\r\nnut_pca <- nut_sub %>% \r\n  # select only numeric variables\r\n  select(3:10) %>% \r\n  # scale dissimilar units and numbers\r\n  scale() %>% \r\n  prcomp()\r\n\r\n# see weighting for each pca\r\n#nut_pca$rotation\r\n\r\n# biplot using autoplot\r\nautoplot(nut_pca,\r\n       data = nut_sub,\r\n       loadings = TRUE,\r\n       colour = 'name',\r\n       loadings.label = TRUE,\r\n       loadings.colour = \"black\",\r\n       loadings.label.colour = \"black\",\r\n       loadings.label.vjust = -0.5, \r\n       size = 3) +\r\n  theme_classic() +\r\n  # update labs\r\n  labs(title = \"PCA Bi-Plot of Nutrients for Select Foods\", \r\n       color = \"Group Name\")\r\n\r\n\r\n\r\n\r\nFigure 1. PCA bi-plot showing how 4 fruit and vegetable types are grouped relative to principal component 1 (PC1) and principal component 2 (PC2). Arrows represent the weighting of included nutrient variables for this PCA analysis. Points represent individual fruit and vegetable species, colored by respective groups.\r\nSummary\r\nIn this exploration of the FoodData Central database, we took a subset of food nutrient profile data, and focused on four general groups of fruits and vegetables. We performed a PCA analysis of eight nutrient variables for these groups and plotted them in a bi-plot. Clear patterns emerged with the two fruits in this analysis (grapes and persimmons) grouped on one side of the bi-plot, strongly influenced by total kilocalories (Kcal), sugar content, and carbohydrates. The three aforementioned nutrients are positively correlated (as shown by the acute angles between loading arrows) which makes sense since sugars are a form of carbohydrate and both of these nutrients are calorically dense. Mushrooms occupy another tight grouping on the bi-plot and are strongly influenced by fiber, vitamin B, and protein (which are positively coerrelated to one another). These three nutrients are also moderately negatively correlated with sugar, carbohydrates, and Kcal, as shown by the obtuse angles formed by their respective loading arrows. Lettuce stands in a third grouping at the top of the bi-plot, strongly influenced by vitamin A content. Vitamin A also appears to show either no correlation, or a relatively small negative correlation to all of the previously mentioned nutrients, since the respective loading arrow angles are either close to 90\\(^\\circ\\) or slightly obtuse. The nutrient with the greatest negative correlation to vitamin A is fat content, represented by the largest loading arrow angle, relatively.\r\n\r\n\r\n\r\n",
    "preview": "posts/code_example_2/code_example_2_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2022-02-24T09:14:57-08:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome_post/",
    "title": "My Time at UCSB",
    "description": "A surfboard gathers dust.",
    "author": [
      {
        "name": "Conner Jainese",
        "url": {}
      }
    ],
    "date": "2022-02-06",
    "categories": [],
    "contents": "\r\nI’d like to share a little about my time here at UCSB. As a bright eyed and bushy tailed undergraduate, in the incoming class of 2011, I spent a lot of time surfing with my friends, stuffing my face at the dining commons, and studying for classes… sometimes.\r\nI managed to join the Love Lab in 2014, got my AAUS (American Academy of Underwater Sciences) certification, and began doing reasearch on the fishes living around Santa Barbara’s Oil platforms. I found myself spending a lot of time diving around the oil platforms in our area, a little less time surfing, and even a little less studying.\r\nIn the years following my graduation (2015), I spent MOST of my time SCUBA diving oil platforms, some of my time working as a deckhand aboard a commercial passenger fishing vessel (got to pay the bills somehow), very little of my time surfing, and (thankfully) no time studying for classes.\r\nThen one fateful day I decided to go back to school for a graduate degree.\r\nNow I spend MOST of my time studying for classes and analyzing data for my thesis, a few days a month I SCUBA for miscellanious work projects, and my surfboard gathers dust in the corner of the room I’m writing this blog post from.\r\nSuch is my time at UCSB, past and present.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-02-08T01:10:01-08:00",
    "input_file": {}
  }
]
